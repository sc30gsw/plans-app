<div class="wrapper">
  <div class="session-header">
    <%= render 'shared/session_header' %>
      <div class="session-right">
      <% if user_signed_in? %>
        <%= render 'shared/header_links' %>
      <% end %>
        <%= link_to user_path(@user.id), class: 'upper-usericon' do %>
          <% if @user.intro.image.present? %>
            <div class="session-usericon">
              <%= image_tag @user.intro.image, class: "index-icon", alt: "ユーザーアイコン" %>
             </div> 
           <% else %> 
            <div class="session-usericon">
              <img src="/assets/default.png" class="index-icon" alt="ユーザーアイコン" >
            </div>
          <% end %> 
        <% end %>
      </div>
    </div>
  </div>
  <div class="mypage">
    <div class="mypage-left">
      <div class="mypage-drop">
        <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-ellipsis-h"></i>
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#">コメント履歴</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">フォローしているユーザー</a>
          <div class="dropdown-divider"></div>
          <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: "dropdown-item" %>
        </div>
      </div>
      <% if @user.intro.image.present? %>
        <div class="mypage-usericon">
          <%= image_tag @user.intro.image, class: "index-icon", alt: "ユーザーアイコン" %>
        </div>
      <% else %>
        <div class="mypage-usericon">
          <img src="/assets/default.png" class="intro-icon " alt="ユーザーアイコン" >
        </div>
      <% end %>
      
      <% if @user.intro.present? %>
        <div class="mypage-name">
          <div class="mypage-first-name">
            <%= @user.intro.first_name %>
          </div>
          <div class="mypage-last-name">
            <%= @user.intro.last_name %>
          </div>
        </div>
        <div class="mypage-up-username">
          <div class="mypage-up-nickname">
            <%= @user.nickname%>
          </div>
        </div>
      <% else %>
        <div class="mypage-username">
          <div class="mypage-nickname">
            <%= @user.nickname%>
          </div>
        </div>
      <% end %>

      <% if @user.intro.present? %>
        <div class="mypage-web">
         <a href="#"><i class="fas fa-clipboard-list"></i><%= @user.intro.website %></a>
        </div>
      <% end %>

      <% if @user.intro.present? %>
        <div class="mypage-introduce">
           <div class="introduce">
            <%= @user.intro.profile %>
          </div>
        </div>
      <% else %>
        <div class="mypage-profile">
          <div class="mypage-profile-sentence">
            プロフィールを編集してみましょう！
          </div>
        </div>
      <% end %>
      <div class="mypage-user-details">
        <div class="mypage-count">
          <div class="mypage-notes-count">
            <a href="#" class="detai">投稿</a>
            <p class="count">0</p>
          </div>
          <div class="mypage-favorite-count">
            <a href="#" class="detail">いいね</a>
            <p class="count">0</p>
          </div>
          <div class="mypage-follower-count">
            <a href="#" class="detail">フォロワー</a>
            <p class="count">0</p>
          </div>
        </div>
      </div>
      <% if user_signed_in? %>
        <% unless @user.intro.present? %>
          <% if current_user.id == @user.id %>
            <div class="profile-btn">
              <%= link_to 'プロフィールを編集する', new_intro_path, class: "profile-edit-btn" %>
            </div>
          <% end %>
        <% end %>
        <% if current_user.id == @user.id && @user.intro.present? %>
          <div class="profile-btn">
            <%= link_to 'プロフィールを編集する', edit_intro_path(@user.intro.id), class: "profile-edit-btn" %>
          </div>
        <% end %>
      <% end %>
    </div>
    <div class="mypage-right">
      <div class="user-activity">
        <div class="user-analyze">
      </div>
        <div class="mypage-notes">
          <h6 class="mypage-notes-title"><i class="fas fa-square mypage-squere"></i>全ての投稿</h6>
          <div class="my-plans">
            <% @user.notes.each do |note| %>
              <div class="mypage-note-tag">
                <i class="fas fa-tags mypage-tag-img"></i>
                <a href="#" class="mypage-tag">睡眠</a>
                <a href ="#" class="mypage-tag">生産性</a>
              </div>
              <div class="mypage-note-title">
                <h3><%= note.title %></h3>
              </div>
              <div class="mypage-note-opt">
                <div class="mypage-detail">
                  <div class="mypage-fav-comment">
                    <i class="far fa-heart mypage-like-btn"></i>
                    <i class="far fa-comment mypage-comment-btn"></i>
                  </div>
                  <div class="mypage-created">
                    <div class="mypage-time"><%= note.created_at.strftime('%Y/%m/%d') %></div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
        <div class="mypage-nation">
          <ul class="pagenations">
            <li class="page-nation"></li>
            <li class="mypage-nation"><span>1/1</span></li>
            <li class="page-nation"></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="mypage-footer">
    <%= render 'shared/footer' %>
  </div>
</div>